{{- $class := .Attributes.class | default "" -}}
{{- $filename := .Attributes.filename | default "" -}}
{{- $lang := .Attributes.lang | default .Type -}}
{{- $caption := .Attributes.caption | default "" -}}


<div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
  {{ partial "components/codeblock" (dict "filename" $filename "lang" $lang "content" .Inner "options" .Options) }}

  {{- if or (eq site.Params.highlight.copy.enable nil) (site.Params.highlight.copy.enable) }}
    {{- partialCached "components/codeblock-copy-button" (dict "filename" $filename) $filename }}
  {{ end }}
</div>
{{- if $caption -}}
<figure>
    <figcaption class="caption">{{ $caption }}</figcaption>
</figure>
{{- end -}}